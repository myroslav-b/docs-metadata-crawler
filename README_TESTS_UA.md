# Тестування проекту DocsCrawler

Цей документ описує структуру та запуск тестів для проекту DocsCrawler.

## Структура тестів

Тести організовані відповідно до структури проекту:

1. **Кореневий пакет (main)**
   - `urlstorage_test.go` - тести для сховища URL
   - `crawler_test.go` - тести для функціональності обходу сайтів
   - `engine_test.go` - тести для основного двигуна
   - `main_test.go` - тести для парсингу параметрів командного рядка

2. **Пакет researchers**
   - `researcher_test.go` - тести для базової функціональності аналізаторів
   - `pdf_test.go` - тести для аналізатора PDF
   - `msox_test.go` - тести для аналізатора Microsoft Office файлів

## Запуск тестів

### Вимоги

Для запуску тестів потрібно:

1. Go версії 1.13 або вище
2. Бібліотека testify: `go get github.com/stretchr/testify`
3. Інші залежності проекту

### Запуск всіх тестів

```bash
go test ./...
```

### Запуск з покриттям коду

Для запуску тестів з генерацією звіту про покриття коду:

```bash
./run_tests.sh
```

Цей скрипт виконає тести і згенерує HTML-звіт про покриття (coverage.html).

### Запуск конкретних тестів

Для запуску тестів конкретного файлу:

```bash
go test -v ./... -run TestUrlStorage
```

## Особливості тестування

### Мок і заглушки

Тести використовують моки для імітації:
- HTTP-серверів (за допомогою `httptest`)
- Аналізаторів документів (через інтерфейс `Researcher`)
- Потоків введення/виведення

### Інтеграційні тести

Деякі інтеграційні тести (особливо тести, що потребують реальних файлів PDF/DOCX) 
відключені за замовчуванням (через `t.Skip`). Для їх запуску потрібно:

1. Створити каталог `testdata` і додати в нього реальні файли
2. Видалити виклик `t.Skip()` з відповідних тестів

## Структура тестових файлів

Кожен тестовий файл дотримується наступної структури:

1. Unit-тести для окремих функцій
2. Моки для зовнішніх залежностей
3. Інтеграційні тести (за потреби)

## Відомі обмеження

- Тести для аналізаторів документів потребують реальних файлів для повноцінного тестування
- Тести для `main.go` не охоплюють фактичний вхід у програму через обмеження тестування функцій з `os.Exit()`